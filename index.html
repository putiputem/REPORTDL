<!DOCTYPE html>
<html>

<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>index</title>

  <style>
    
  </style>

  
</head>
<body>
  <!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- CÁC LỆNH CHỐNG LƯU BỘ NHỚ ĐỆM -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    
    <title>Báo cáo Ghi nhận</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- THAY ĐỔI FONT MỚI -->
    <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        /* ÁP DỤNG FONT MỚI CHO TOÀN TRANG */
        body { font-family: 'Be Vietnam Pro', sans-serif; }
        .btn-loading { position: relative; pointer-events: none; color: transparent !important; }
        .btn-loading::after {
            content: ''; position: absolute; top: 50%; left: 50%;
            width: 1.25rem; height: 1.25rem; margin-top: -0.625rem; margin-left: -0.625rem;
            border-radius: 50%; border: 2px solid #fff; border-top-color: transparent;
            animation: spin 0.8s linear infinite;
        }
        @keyframes spin { to { transform: rotate(360deg); } }
        .hidden { display: none; }
        details > summary { list-style: none; }
        details > summary::-webkit-details-marker { display: none; }
        details[open] summary .arrow-down { transform: rotate(180deg); }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen py-8 sm:py-12">

    <div class="w-full max-w-2xl mx-auto p-4">
        <div class="bg-white rounded-2xl shadow-xl border border-gray-200/80 p-6 sm:p-8 md:p-10">

            <!-- PHẦN ĐĂNG NHẬP -->
            <div id="user-identity-section">
                <!-- TIÊU ĐỀ MỚI & CỠ CHỮ LỚN HƠN -->
                <h1 class="text-4xl sm:text-5xl font-extrabold text-gray-900 mb-2 text-center tracking-tight">BÁO CÁO GHI NHẬN</h1>
                <p class="text-gray-500 mb-8 text-center">Vui lòng nhập tên của bạn để bắt đầu.</p>
                <form id="user-identity-form" class="space-y-4">
                    <div>
                        <label for="initialFullName" class="block text-sm font-semibold text-gray-700 mb-1">Họ và Tên</label>
                        <input type="text" id="initialFullName" required class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition duration-200" placeholder="Nguyễn Văn A">
                    </div>
                    <div class="pt-2">
                        <button type="submit" class="w-full bg-indigo-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-all duration-300 shadow-md hover:shadow-lg">
                            Đăng nhập
                        </button>
                    </div>
                </form>
            </div>

            <!-- PHẦN FORM BÁO CÁO CHÍNH -->
            <div id="main-form-section" class="hidden">
                 <div class="flex justify-between items-start mb-8">
                    <div>
                        <!-- TIÊU ĐỀ MỚI & CỠ CHỮ LỚN HƠN -->
                        <h1 class="text-4xl sm:text-5xl font-extrabold text-gray-900 tracking-tight">BÁO CÁO GHI NHẬN</h1>
                        <p class="text-gray-500 mt-2" id="welcome-message"></p>
                    </div>
                    <button id="change-user-btn" class="text-sm text-indigo-600 hover:underline flex-shrink-0 mt-1 ml-4 font-semibold">Đổi người dùng</button>
                </div>
                
                <form id="data-form" class="space-y-5">
                    <!-- Mục 1: Cơ sở vật chất -->
                    <details class="group border border-gray-200 rounded-lg overflow-hidden">
                        <summary class="flex justify-between items-center p-4 bg-gray-50 hover:bg-gray-100 cursor-pointer transition-colors duration-200">
                            <h2 class="font-bold text-gray-800">1. Cơ sở vật chất</h2>
                            <svg class="w-5 h-5 transition-transform duration-300 arrow-down text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </summary>
                        <div class="p-4 space-y-4 border-t border-gray-200">
                            <div><label class="text-sm font-semibold text-gray-700">1.1 Vệ sinh</label><textarea name="csvc-vesinh" class="mt-1 w-full px-3 py-2 border rounded-md text-sm focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500" rows="2"></textarea></div>
                            <div><label class="text-sm font-semibold text-gray-700">1.2 An ninh</label><textarea name="csvc-anninh" class="mt-1 w-full px-3 py-2 border rounded-md text-sm focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500" rows="2"></textarea></div>
                            <div><label class="text-sm font-semibold text-gray-700">1.3 An Toàn</label><textarea name="csvc-antoan" class="mt-1 w-full px-3 py-2 border rounded-md text-sm focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500" rows="2"></textarea></div>
                            <div><label class="text-sm font-semibold text-gray-700">1.4 Thiết bị dạy học</label><textarea name="csvc-thietbi" class="mt-1 w-full px-3 py-2 border rounded-md text-sm focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500" rows="2"></textarea></div>
                        </div>
                    </details>
                    
                    <!-- Mục 2: Tác phong CBNV -->
                    <details class="group border border-gray-200 rounded-lg overflow-hidden">
                        <summary class="flex justify-between items-center p-4 bg-gray-50 hover:bg-gray-100 cursor-pointer transition-colors duration-200">
                            <h2 class="font-bold text-gray-800">2. Tác phong CBNV</h2>
                            <svg class="w-5 h-5 transition-transform duration-300 arrow-down text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </summary>
                        <div class="p-4 space-y-4 border-t border-gray-200">
                            <div><label class="text-sm font-semibold text-gray-700">2.1 Trang phục</label><textarea name="cbnv-trangphuc" class="mt-1 w-full px-3 py-2 border rounded-md text-sm focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500" rows="2"></textarea></div>
                            <div><label class="text-sm font-semibold text-gray-700">2.2 Tác phong</label><textarea name="cbnv-tacphong" class="mt-1 w-full px-3 py-2 border rounded-md text-sm focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500" rows="2"></textarea></div>
                            <div><label class="text-sm font-semibold text-gray-700">2.3 Nề nếp</label><textarea name="cbnv-nenep" class="mt-1 w-full px-3 py-2 border rounded-md text-sm focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500" rows="2"></textarea></div>
                            <div><label class="text-sm font-semibold text-gray-700">2.4 Giao tiếp ứng xử</label><textarea name="cbnv-giaotiep" class="mt-1 w-full px-3 py-2 border rounded-md text-sm focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500" rows="2"></textarea></div>
                        </div>
                    </details>
                    
                    <!-- Mục 3: Tác phong Sinh viên -->
                     <details class="group border border-gray-200 rounded-lg overflow-hidden">
                        <summary class="flex justify-between items-center p-4 bg-gray-50 hover:bg-gray-100 cursor-pointer transition-colors duration-200">
                            <h2 class="font-bold text-gray-800">3. Tác phong Sinh viên</h2>
                            <svg class="w-5 h-5 transition-transform duration-300 arrow-down text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </summary>
                        <div class="p-4 space-y-4 border-t border-gray-200">
                            <div><label class="text-sm font-semibold text-gray-700">3.1 Trang phục</label><textarea name="sv-trangphuc" class="mt-1 w-full px-3 py-2 border rounded-md text-sm focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500" rows="2"></textarea></div>
                            <div><label class="text-sm font-semibold text-gray-700">3.2 Giao tiếp ứng xử</label><textarea name="sv-giaotiep" class="mt-1 w-full px-3 py-2 border rounded-md text-sm focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500" rows="2"></textarea></div>
                            <div><label class="text-sm font-semibold text-gray-700">3.3 Nề nếp học tập</label><textarea name="sv-nenep" class="mt-1 w-full px-3 py-2 border rounded-md text-sm focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500" rows="2"></textarea></div>
                            <div><label class="text-sm font-semibold text-gray-700">3.4 Chấp hành nội quy</label><textarea name="sv-chaphanh" class="mt-1 w-full px-3 py-2 border rounded-md text-sm focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500" rows="2"></textarea></div>
                        </div>
                    </details>

                    <!-- Mục 4: Các vấn đề khác -->
                    <div class="border border-gray-200 rounded-lg p-4">
                        <label class="text-lg font-bold text-gray-800">4. Các vấn đề khác</label>
                        <textarea name="van-de-khac" rows="4" class="mt-2 w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 transition duration-200" placeholder="Ghi chú thêm các vấn đề phát sinh khác..."></textarea>
                    </div>

                    <!-- Nút Gửi -->
                    <div class="pt-4">
                        <button type="submit" id="submit-btn" class="w-full bg-indigo-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-all duration-300 shadow-md hover:shadow-lg">
                            Gửi báo cáo
                        </button>
                    </div>
                </form>
                
                <div id="message-box" class="mt-6 text-center text-sm font-medium transition-opacity duration-300 opacity-0"></div>
            </div>
        </div>
    </div>

    <script>
        // ===================================================================
        // BƯỚC QUAN TRỌNG NHẤT: DÁN WEB APP URL CỦA BẠN VÀO ĐÂY
        // Thay thế 'YOUR_WEB_APP_URL_HERE' bằng link bạn đã sao chép.
        const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbzVqb3Q8ls0SkUa8V9GEZsZnX7Fe5d59p8bLMekoaZXdsxQSjYuSJEkjo6ao_e8cw4F/exec';
        // ===================================================================

        const userIdentitySection = document.getElementById('user-identity-section');
        const mainFormSection = document.getElementById('main-form-section');
        const userIdentityForm = document.getElementById('user-identity-form');
        const dataForm = document.getElementById('data-form');
        const submitBtn = document.getElementById('submit-btn');
        const messageBox = document.getElementById('message-box');
        const changeUserBtn = document.getElementById('change-user-btn');
        
        function showMainForm() {
            const fullName = localStorage.getItem('report_user_fullName');
            if (fullName) {
                document.getElementById('welcome-message').textContent = `Người báo cáo: ${fullName}`;
                userIdentitySection.classList.add('hidden');
                mainFormSection.classList.remove('hidden');
            } else {
                userIdentitySection.classList.remove('hidden');
                mainFormSection.classList.add('hidden');
            }
        }

        userIdentityForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const fullName = document.getElementById('initialFullName').value;
            if (fullName) {
                localStorage.setItem('report_user_fullName', fullName);
                showMainForm();
            }
        });

        dataForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            if (SCRIPT_URL === 'YOUR_WEB_APP_URL_HERE') {
                showMessage('Lỗi Cấu hình: Bạn chưa dán Web App URL vào file index.html.', 'error');
                return;
            }
            submitBtn.classList.add('btn-loading');
            submitBtn.disabled = true;

            const formData = new FormData(dataForm);
            const data = {};
            formData.forEach((value, key) => (data[key] = value));
            data.fullName = localStorage.getItem('report_user_fullName');
            
            try {
                const response = await fetch(SCRIPT_URL, {
                    method: 'POST', mode: 'cors', headers: { 'Content-Type': 'text/plain;charset=utf-8' },
                    body: JSON.stringify(data),
                });
                const result = await response.json();
                if (result.status === 'success') {
                    showMessage('Gửi báo cáo thành công!', 'success');
                    dataForm.reset();
                } else { throw new Error(result.message || 'Có lỗi không xác định xảy ra.'); }
            } catch (error) {
                console.error('Error!', error);
                showMessage(`Đã có lỗi xảy ra khi gửi: ${error.message}`, 'error');
            } finally {
                submitBtn.classList.remove('btn-loading');
                submitBtn.disabled = false;
            }
        });
        
        changeUserBtn.addEventListener('click', () => {
            localStorage.removeItem('report_user_fullName');
            userIdentityForm.reset();
            dataForm.reset();
            showMainForm();
        });

        function showMessage(message, type) {
            messageBox.textContent = message;
            messageBox.className = 'mt-6 text-center text-sm font-medium opacity-100 transition-opacity duration-300';
            messageBox.classList.add(type === 'success' ? 'text-green-600' : 'text-red-600');
            setTimeout(() => { messageBox.classList.add('opacity-0'); }, 5000);
        }

        document.addEventListener('DOMContentLoaded', showMainForm);
    </script>
</body>
</html>



  <script>
    
  </script>
</body>
</html>
